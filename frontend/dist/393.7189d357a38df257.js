"use strict";(self.webpackChunkfinsweet_project=self.webpackChunkfinsweet_project||[]).push([[393],{7393:(lt,h,a)=>{a.r(h),a.d(h,{PostsAdmComponent:()=>at});var m=a(5313),d=a(2296),C=a(617),c=a(9947),p=a(7700),x=a(2032),u=a(5195),Z=a(8525),D=a(6814),r=a(6223),A=a(2939),t=a(5879),T=a(6427),v=a(861),f=a(9157),I=a(3680);function M(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," min symbol is "),t.TgZ(2,"strong"),t._uU(3,"3"),t.qZA()())}function J(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," max symbol is "),t.TgZ(2,"strong"),t._uU(3,"70"),t.qZA()())}function O(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," title is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function Y(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",13),t._uU(2),t.qZA(),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("value",e.title.toUpperCase()),t.xp6(1),t.hij(" ",e.title," ")}}function k(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-option",13)(2,"div",16)(3,"img",17,18),t.NdJ("error",function(){t.CHM(e);const i=t.MAs(4);return t.KtG(i.src="./assets/Images/not_user.jpg")}),t.qZA(),t._uU(5),t.qZA()(),t.BQk()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(2),t.Q6J("src",e.image,t.LSH),t.xp6(2),t.hij(" ",e.name," ")}}function Q(o,n){if(1&o&&(t.TgZ(0,"mat-form-field",14)(1,"mat-label"),t._uU(2,"User"),t.qZA(),t.TgZ(3,"mat-select",15),t.YNc(4,k,6,3,"ng-container",6),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.dataAuthor)}}function S(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," title is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function j(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," min symbol is "),t.TgZ(2,"strong"),t._uU(3,"5"),t.qZA()())}function E(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," max symbol is "),t.TgZ(2,"strong"),t._uU(3,"36"),t.qZA()())}function L(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," title is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function F(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," min symbol is "),t.TgZ(2,"strong"),t._uU(3,"15"),t.qZA()())}function H(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," title is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}let P=(()=>{class o{constructor(e,s,i,l){this.reqServ=e,this.valueDetails=s,this.dialog=i,this.matSnackBar=l,this.userData=JSON.parse(localStorage.getItem("userData")??"null").user,this.form=new r.cw({title:new r.NI("",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(70)]),category:new r.NI("",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(53)]),image:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required,r.kI.minLength(15)]),shortDescription:new r.NI("",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(36)]),userId:new r.NI("false"==this.userData.superAdmin?this.userData.id:"",[r.kI.required,r.kI.minLength(5)])})}ngOnInit(){this.reqServ.getData(c.N.author.get).subscribe(e=>{this.dataAuthor=e}),this.reqServ.getData(c.N.category.get).subscribe(e=>{this.dataCategory=e}),"postEdit"==this.valueDetails.isCalled&&this.reqServ.getData(c.N.posts.get+"/"+this.valueDetails.dialogPostsValue).subscribe(e=>{this.valuePost=e,"postEdit"==this.valueDetails.isCalled&&(this.form.get("title")?.setValue(e.title),this.form.get("category")?.setValue(e.category),this.form.get("userId")?.setValue(e.user_id),this.form.get("image")?.setValue(e.image),this.form.get("description")?.setValue(e.description),this.form.get("shortDescription")?.setValue(e.shortDescription))})}save(){if(this.form.valid)if("postEdit"==this.valueDetails.isCalled){let e=new Date,s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.reqServ.getData(c.N.category.get+"?title="+this.form.get("category")?.value.slice(0,1).toUpperCase()+this.form.get("category")?.value.slice(1).toLowerCase()).subscribe(i=>{const l={user_id:this.form.get("userId")?.value,category:this.form.get("category")?.value,category_icon:i[0].image,created_date:s[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear(),title:this.form.get("title")?.value,image:this.form.get("image")?.value,shortDescription:this.form.get("shortDescription")?.value,description:this.form.get("description")?.value};this.reqServ.editData(c.N.posts.get+"/"+this.valueDetails.dialogPostsValue,l).subscribe(g=>{this.dialog.closeAll(),this.matSnackBar.open("post edited","close",{duration:3e3})})})}else{let e=new Date,i=(JSON.parse(localStorage.getItem("userData")??"null"),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);this.reqServ.getData(c.N.category.get+"?title="+this.form.get("category")?.value.slice(0,1).toUpperCase()+this.form.get("category")?.value.slice(1).toLowerCase()).subscribe(l=>{const g={user_id:this.form.get("userId")?.value,category:this.form.get("category")?.value,category_icon:l[0].image,created_date:i[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear(),title:this.form.get("title")?.value,image:this.form.get("image")?.value,shortDescription:this.form.get("shortDescription")?.value,description:this.form.get("description")?.value};this.reqServ.addData(c.N.posts.get,g).subscribe(_=>{this.dialog.closeAll(),this.matSnackBar.open("post created","close",{duration:3e3})})})}}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(T.s),t.Y36(v.A),t.Y36(p.uw),t.Y36(A.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialog-posts"]],standalone:!0,features:[t.jDz],decls:37,vars:14,consts:[[1,"example-form",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","placeholder","enter your post title","formControlName","title","name","title"],[4,"ngIf"],[2,"display","flex","align-items","center","justify-content","space-between"],["formControlName","category"],[4,"ngFor","ngForOf"],["style","width: 49%",4,"ngIf"],[2,"width","100%"],["matInput","","placeholder","enter your post image","formControlName","image","name","image"],["matInput","","placeholder","enter your post short deskription","formControlName","shortDescription","name","shortDescription",1,"input_textarea"],["rows","3","matInput","","placeholder","enter your post description","formControlName","description","name","description",1,"input_textarea"],["color","primary","mat-raised-button",""],[3,"value"],[2,"width","49%"],["formControlName","userId"],[2,"display","flex","align-items","center"],["alt","image",1,"select_author_img",2,"margin-right","20px",3,"src","error"],["img",""]],template:function(s,i){if(1&s&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"form",0),t.NdJ("ngSubmit",function(){return i.save()}),t.TgZ(3,"mat-form-field",1)(4,"mat-label"),t._uU(5,"Title"),t.qZA(),t._UZ(6,"input",2),t.YNc(7,M,4,0,"mat-error",3),t.YNc(8,J,4,0,"mat-error",3),t.YNc(9,O,4,0,"mat-error",3),t.qZA(),t.TgZ(10,"div",4)(11,"mat-form-field")(12,"mat-label"),t._uU(13,"Category"),t.qZA(),t.TgZ(14,"mat-select",5),t.YNc(15,Y,3,2,"ng-container",6),t.qZA()(),t.YNc(16,Q,5,1,"mat-form-field",7),t.qZA(),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"Image"),t.qZA(),t._UZ(20,"input",9),t.YNc(21,S,4,0,"mat-error",3),t.qZA(),t.TgZ(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"short description"),t.qZA(),t._UZ(25,"textarea",10),t.YNc(26,j,4,0,"mat-error",3),t.YNc(27,E,4,0,"mat-error",3),t.YNc(28,L,4,0,"mat-error",3),t.qZA(),t.TgZ(29,"mat-form-field",1)(30,"mat-label"),t._uU(31,"Description"),t.qZA(),t._UZ(32,"textarea",11),t.YNc(33,F,4,0,"mat-error",3),t.YNc(34,H,4,0,"mat-error",3),t.qZA(),t.TgZ(35,"button",12),t._uU(36,"SAVE"),t.qZA()()()()),2&s){let l,g,_,b,y,N,U,w,q;t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(5),t.Q6J("ngIf",null==(l=i.form.get("title"))?null:l.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",null==(g=i.form.get("title"))?null:g.hasError("maxlength")),t.xp6(1),t.Q6J("ngIf",null==(_=i.form.get("title"))?null:_.hasError("required")),t.xp6(2),t.Udp("width","true"===i.userData.superAdmin?"49%":"100%"),t.xp6(4),t.Q6J("ngForOf",i.dataCategory),t.xp6(1),t.Q6J("ngIf","true"===i.userData.superAdmin),t.xp6(5),t.Q6J("ngIf",null==(b=i.form.get("image"))?null:b.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(y=i.form.get("shortDescription"))?null:y.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",null==(N=i.form.get("shortDescription"))?null:N.hasError("maxlength")),t.xp6(1),t.Q6J("ngIf",null==(U=i.form.get("shortDescription"))?null:U.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(w=i.form.get("description"))?null:w.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",null==(q=i.form.get("description"))?null:q.hasError("required"))}},dependencies:[x.c,x.Nt,f.KE,f.hX,f.TO,u.QW,u.a8,u.dn,Z.LD,Z.gD,I.ey,D.ax,d.ot,d.lW,D.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,A.ZX],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.input_textarea[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px}textarea[_ngcontent-%COMP%]{resize:none}.select_author_img[_ngcontent-%COMP%]{width:30px;height:30px;object-fit:cover;border-radius:50%}"]})}return o})();function B(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Title "),t.qZA())}function V(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.TgZ(2,"div",20),t._uU(3),t.qZA()()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.title.length>20?e.title.slice(0,20)+"...":e.title," "),t.xp6(2),t.hij(" ",e.title," ")}}function $(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Category "),t.qZA())}function G(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",21)(1,"img",22,23),t.NdJ("error",function(){t.CHM(e);const i=t.MAs(2);return t.KtG(i.src="assets/Images/not-image.jpeg")}),t.qZA(),t._uU(3),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("src",e.category_icon,t.LSH),t.xp6(2),t.hij(" ",e.category," ")}}function K(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Careated Date "),t.qZA())}function z(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.created_date," ")}}function R(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," image "),t.qZA())}function X(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",25)(1,"img",26,23),t.NdJ("error",function(){t.CHM(e);const i=t.MAs(2);return t.KtG(i.src="assets/Images/not-image.jpeg")}),t.qZA(),t.TgZ(3,"div",27)(4,"img",28,23),t.NdJ("error",function(){t.CHM(e);const i=t.MAs(2);return t.KtG(i.src="assets/Images/not-image.jpeg")}),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH),t.xp6(3),t.Q6J("src",e.image,t.LSH)}}function W(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Description "),t.qZA())}function tt(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.TgZ(2,"div",20),t._uU(3),t.qZA()()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.description.length>15?e.description.slice(0,15)+"...":e.description," "),t.xp6(2),t.hij(" ",e.description," ")}}function et(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Short Description "),t.qZA())}function ot(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.TgZ(2,"div",29),t._uU(3),t.qZA()()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.shortDescription.length>15?e.shortDescription.slice(0,15)+"...":e.shortDescription," "),t.xp6(2),t.hij(" ",e.shortDescription," ")}}function it(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1," Action "),t.qZA())}function nt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",30)(1,"button",31),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.deletePost(l.id))}),t.TgZ(2,"mat-icon",32),t._uU(3,"delete"),t.qZA()(),t.TgZ(4,"mat-dialog-actions")(5,"button",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.openEditDialog(l.id))}),t.TgZ(6,"mat-icon",34),t._uU(7,"edit"),t.qZA()()()()}}function rt(o,n){1&o&&t._UZ(0,"tr",35)}function st(o,n){1&o&&t._UZ(0,"tr",36)}let at=(()=>{class o{constructor(e,s,i){this.reqServ=e,this.dialog=s,this.dialogDetails=i,this.userData=JSON.parse(localStorage.getItem("userData")??"null").user,this.displayedColumns=["title","category","created-date","image","description","shortDescription","action"]}ngOnInit(){this.getPosts()}deletePost(e){confirm("delete this post ?")&&(this.reqServ.deleteData(c.N.posts.get+"/"+e).subscribe(()=>{}),this.getPosts())}getPosts(){this.reqServ.getData("true"===this.userData.superAdmin?c.N.posts.get:c.N.posts.get+"?user_id="+this.userData.id).subscribe(e=>{this.dataPosts=e})}openAddDialog(){let e=!0;this.dialog.open(P,{width:"520px"}),this.dialog.afterAllClosed.subscribe(()=>{e&&(this.getPosts(),e=!1)}),this.dialogDetails.isCalled="postAdd"}openEditDialog(e){let s=!0;this.dialog.open(P,{width:"520px"}),this.dialog.afterAllClosed.subscribe(()=>{s&&(this.getPosts(),s=!1)}),this.dialogDetails.dialogPostsValue=e,this.dialogDetails.isCalled="postEdit"}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(T.s),t.Y36(p.uw),t.Y36(v.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-posts-adm"]],standalone:!0,features:[t.jDz],decls:27,vars:3,consts:[[1,"parent-div"],["color","primary","mat-raised-button","",2,"align-self","flex-end","margin-bottom","10px",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["class","td-table","mat-cell","",4,"matCellDef"],["matColumnDef","category"],["class","category-td","mat-cell","",4,"matCellDef"],["matColumnDef","created-date"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-td","mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","shortDescription"],["matColumnDef","action"],["class","td-table td-action","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"td-table"],[1,"show-all-text"],["mat-cell","",1,"category-td"],[3,"src","error"],["img",""],["mat-cell",""],["mat-cell","",1,"image-td"],["alt","img",3,"src","error"],[1,"show-all-img"],["alt","not image",3,"src","error"],[1,"show-all-text",2,"left","0","right","unset"],["mat-cell","",1,"td-table","td-action"],["mat-icon-button","",3,"click"],["color","warn"],["mat-icon-button","",1,"edit-button",3,"click"],["color","primary"],["mat-header-row",""],["mat-row",""]],template:function(s,i){1&s&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.openAddDialog()}),t._uU(2,"ADD"),t.qZA(),t.TgZ(3,"table",2),t.ynx(4,3),t.YNc(5,B,2,0,"th",4),t.YNc(6,V,4,2,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,$,2,0,"th",4),t.YNc(9,G,4,2,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,K,2,0,"th",4),t.YNc(12,z,2,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,R,2,0,"th",4),t.YNc(15,X,6,2,"td",11),t.BQk(),t.ynx(16,12),t.YNc(17,W,2,0,"th",4),t.YNc(18,tt,4,2,"td",5),t.BQk(),t.ynx(19,13),t.YNc(20,et,2,0,"th",4),t.YNc(21,ot,4,2,"td",5),t.BQk(),t.ynx(22,14),t.YNc(23,it,2,0,"th",4),t.YNc(24,nt,8,0,"td",15),t.BQk(),t.YNc(25,rt,1,0,"tr",16),t.YNc(26,st,1,0,"tr",17),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("dataSource",i.dataPosts),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.ot,d.lW,d.RK,C.Ps,C.Hw,p.Is,p.H8],styles:[".parent-div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-button[_ngcontent-%COMP%]:disabled{opacity:.5}table[_ngcontent-%COMP%]{background-color:#e5e5e5}th[_ngcontent-%COMP%]{color:#3a3a3a}td[_ngcontent-%COMP%]{color:#252525}mat-dialog-actions[_ngcontent-%COMP%]{display:inline-block;padding:1px}.show-all-text[_ngcontent-%COMP%]{display:none;background-color:#3f3f3f;position:absolute;bottom:-80px;right:-100px;overflow-y:scroll;height:100px;z-index:999;color:#f5f5f5;font-weight:700;padding:10px;border-radius:10px}.show-all-text[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.td-table[_ngcontent-%COMP%]{position:relative;overflow:unset}.td-table[_ngcontent-%COMP%]:hover > .show-all-text[_ngcontent-%COMP%]{display:block}.category-td[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.image-td[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;display:block;margin:10px 0;border-radius:6px;box-shadow:#00000059 0 5px 15px}.show-all-img[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:cover;display:block}.show-all-img[_ngcontent-%COMP%]{display:none;background-color:#3f3f3f;position:absolute;z-index:1099;color:#f5f5f5;font-weight:700;padding:10px;border-radius:10px}.image-td[_ngcontent-%COMP%]{overflow:unset}.image-td[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:hover + .show-all-img[_ngcontent-%COMP%]{display:block}"]})}return o})()}}]);